const client = require("./client");

const {getAllUsers } = require('./users');

const imageURL = "data:image/png;base64,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"

async function dropTables() {
  console.log("Dropping All Tables...");
  // drop all tables, in the correct order
  try {
    await client.query(`
    DROP TABLE IF EXISTS routine_activities;
    DROP TABLE IF EXISTS routines;
    DROP TABLE IF EXISTS activities;
    DROP TABLE IF EXISTS users;
  `);
  } catch (error) {
    throw error;
  }
}

async function createTables() {
  console.log('CREATING TABLES')
  try {
    await client.query(`
    CREATE TABLE users(
      id SERIAL PRIMARY KEY,
      "profileImageData" TEXT
    );
    `)
    console.log('FINISHED CREATING TABLES')
  } catch(error) {
    console.log(error);
  }
}

async function createInitialUsers() {
  console.log('CREATING INITIAL USERS')
  try {
    const {rows: [user] }= await client.query(`
    INSERT INTO users ("profileImageData")
    VALUES ($1)
    RETURNING *;
    `, [imageURL])
    
    console.log('FINISHED CREATING USER')
  } catch(err) {
    console.log(err)
  }
}

async function build() {
  try {
    client.connect();
    await dropTables();
    await createTables();
    await createInitialUsers();
    // console.log(await getAllUsers())
  } catch (ex) {
    console.log("error building");
  }
}

build()
  .catch(console.error)
  .finally(() => client.end());
